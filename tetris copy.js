var _0xc5f9=["\x69\x6D\x61\x67\x65\x59","\x69\x6D\x61\x67\x65\x58","\x74\x65\x6D\x70\x6C\x61\x74\x65","\x78","\x79","\x6C\x65\x6E\x67\x74\x68","\x67\x65\x74\x54\x72\x75\x6E\x63\x65\x64\x50\x6F\x73\x69\x74\x69\x6F\x6E","\x74\x72\x75\x6E\x63","\x63\x68\x65\x63\x6B\x52\x69\x67\x68\x74","\x63\x68\x65\x63\x6B\x4C\x65\x66\x74","\x63\x68\x65\x63\x6B\x42\x6F\x74\x74\x6F\x6D","\x73\x6C\x69\x63\x65","\x63\x61\x6E\x76\x61\x73","\x67\x65\x74\x45\x6C\x65\x6D\x65\x6E\x74\x42\x79\x49\x64","\x6E\x65\x78\x74\x53\x68\x61\x70\x65\x43\x61\x6E\x76\x61\x73","\x73\x63\x6F\x72\x65\x43\x61\x6E\x76\x61\x73","\x69\x6D\x61\x67\x65","\x32\x64","\x67\x65\x74\x43\x6F\x6E\x74\x65\x78\x74","\x77\x69\x64\x74\x68","\x68\x65\x69\x67\x68\x74","\x63\x6F\x6D\x70\x6C\x65\x74\x65\x20\x72\x6F\x77","\x6C\x6F\x67","\x70\x75\x73\x68","\x66\x69\x6C\x6C\x53\x74\x79\x6C\x65","\x66\x69\x6C\x6C\x52\x65\x63\x74","\x23\x34\x65\x33\x36\x64\x36","\x77\x68\x69\x74\x65","\x64\x72\x61\x77\x49\x6D\x61\x67\x65","\x23\x64\x34\x32\x61\x35\x37","\x63\x6C\x65\x61\x72\x52\x65\x63\x74","\x66\x6F\x6E\x74","\x20\x34\x35\x70\x78\x20\x50\x6F\x70\x70\x69\x6E\x73","\x62\x6C\x61\x63\x6B","\x66\x69\x6C\x6C\x54\x65\x78\x74","\x36\x34\x70\x78\x20\x50\x6F\x70\x70\x69\x6E\x73","\x47\x61\x6D\x65\x20\x4F\x76\x65\x72\x21","\x72\x61\x6E\x64\x6F\x6D","\x66\x6C\x6F\x6F\x72","\x63\x72\x65\x61\x74\x65","\x6B\x65\x79\x64\x6F\x77\x6E","\x6B\x65\x79\x43\x6F\x64\x65","\x6D\x6F\x76\x65\x4C\x65\x66\x74","\x63\x68\x61\x6E\x67\x65\x52\x6F\x74\x61\x74\x69\x6F\x6E","\x6D\x6F\x76\x65\x52\x69\x67\x68\x74","\x6D\x6F\x76\x65\x42\x6F\x74\x74\x6F\x6D","\x61\x64\x64\x45\x76\x65\x6E\x74\x4C\x69\x73\x74\x65\x6E\x65\x72"];class Tetris{constructor(_0x48bcx2,_0x48bcx3,_0x48bcx4){this[_0xc5f9[0]]= _0x48bcx3;this[_0xc5f9[1]]= _0x48bcx2;this[_0xc5f9[2]]= _0x48bcx4;this[_0xc5f9[3]]= squareCountX/ 2;this[_0xc5f9[4]]= 0}checkBottom(){for(let _0x48bcx6=0;_0x48bcx6< this[_0xc5f9[2]][_0xc5f9[5]];_0x48bcx6++){for(let _0x48bcx7=0;_0x48bcx7< this[_0xc5f9[2]][_0xc5f9[5]];_0x48bcx7++){if(this[_0xc5f9[2]][_0x48bcx6][_0x48bcx7]== 0){continue};let _0x48bcx8=_0x48bcx6+ this[_0xc5f9[6]]()[_0xc5f9[3]];let _0x48bcx9=_0x48bcx7+ this[_0xc5f9[6]]()[_0xc5f9[4]];if(_0x48bcx9+ 1>= squareCountY){return false};if(gameMap[_0x48bcx9+ 1][_0x48bcx8][_0xc5f9[1]]!=  -1){return false}}};return true}getTruncedPosition(){return {x:Math[_0xc5f9[7]](this[_0xc5f9[3]]),y:Math[_0xc5f9[7]](this[_0xc5f9[4]])}}checkLeft(){for(let _0x48bcx6=0;_0x48bcx6< this[_0xc5f9[2]][_0xc5f9[5]];_0x48bcx6++){for(let _0x48bcx7=0;_0x48bcx7< this[_0xc5f9[2]][_0xc5f9[5]];_0x48bcx7++){if(this[_0xc5f9[2]][_0x48bcx6][_0x48bcx7]== 0){continue};let _0x48bcx8=_0x48bcx6+ this[_0xc5f9[6]]()[_0xc5f9[3]];let _0x48bcx9=_0x48bcx7+ this[_0xc5f9[6]]()[_0xc5f9[4]];if(_0x48bcx8- 1< 0){return false};if(gameMap[_0x48bcx9][_0x48bcx8- 1][_0xc5f9[1]]!=  -1){return false}}};return true}checkRight(){for(let _0x48bcx6=0;_0x48bcx6< this[_0xc5f9[2]][_0xc5f9[5]];_0x48bcx6++){for(let _0x48bcx7=0;_0x48bcx7< this[_0xc5f9[2]][_0xc5f9[5]];_0x48bcx7++){if(this[_0xc5f9[2]][_0x48bcx6][_0x48bcx7]== 0){continue};let _0x48bcx8=_0x48bcx6+ this[_0xc5f9[6]]()[_0xc5f9[3]];let _0x48bcx9=_0x48bcx7+ this[_0xc5f9[6]]()[_0xc5f9[4]];if(_0x48bcx8+ 1>= squareCountX){return false};if(gameMap[_0x48bcx9][_0x48bcx8+ 1][_0xc5f9[1]]!=  -1){return false}}};return true}moveRight(){if(this[_0xc5f9[8]]()){this[_0xc5f9[3]]+= 1}}moveLeft(){if(this[_0xc5f9[9]]()){this[_0xc5f9[3]]-= 1}}moveBottom(){if(this[_0xc5f9[10]]()){this[_0xc5f9[4]]+= 1;score+= 1}}changeRotation(){let _0x48bcx11=[];for(let _0x48bcx6=0;_0x48bcx6< this[_0xc5f9[2]][_0xc5f9[5]];_0x48bcx6++){_0x48bcx11[_0x48bcx6]= this[_0xc5f9[2]][_0x48bcx6][_0xc5f9[11]]()};let _0x48bcx12=this[_0xc5f9[2]][_0xc5f9[5]];for(let _0x48bcx13=0;_0x48bcx13< _0x48bcx12/ 2;_0x48bcx13++){let _0x48bcx14=_0x48bcx13;let _0x48bcx15=_0x48bcx12- 1- _0x48bcx13;for(let _0x48bcx6=_0x48bcx14;_0x48bcx6< _0x48bcx15;_0x48bcx6++){let _0x48bcx16=_0x48bcx6- _0x48bcx14;let _0x48bcx17=this[_0xc5f9[2]][_0x48bcx14][_0x48bcx6];this[_0xc5f9[2]][_0x48bcx14][_0x48bcx6]= this[_0xc5f9[2]][_0x48bcx6][_0x48bcx15];this[_0xc5f9[2]][_0x48bcx6][_0x48bcx15]= this[_0xc5f9[2]][_0x48bcx15][_0x48bcx15- _0x48bcx16];this[_0xc5f9[2]][_0x48bcx15][_0x48bcx15- _0x48bcx16]= this[_0xc5f9[2]][_0x48bcx15- _0x48bcx16][_0x48bcx14];this[_0xc5f9[2]][_0x48bcx15- _0x48bcx16][_0x48bcx14]= _0x48bcx17}};for(let _0x48bcx6=0;_0x48bcx6< this[_0xc5f9[2]][_0xc5f9[5]];_0x48bcx6++){for(let _0x48bcx7=0;_0x48bcx7< this[_0xc5f9[2]][_0xc5f9[5]];_0x48bcx7++){if(this[_0xc5f9[2]][_0x48bcx6][_0x48bcx7]== 0){continue};let _0x48bcx8=_0x48bcx6+ this[_0xc5f9[6]]()[_0xc5f9[3]];let _0x48bcx9=_0x48bcx7+ this[_0xc5f9[6]]()[_0xc5f9[4]];if(_0x48bcx8< 0|| _0x48bcx8>= squareCountX|| _0x48bcx9< 0|| _0x48bcx9>= squareCountY){this[_0xc5f9[2]]= _0x48bcx11;return false}}}}};const imageSquareSize=24;const size=40;const framePerSecond=24;const gameSpeed=5;const canvas=document[_0xc5f9[13]](_0xc5f9[12]);const nextShapeCanvas=document[_0xc5f9[13]](_0xc5f9[14]);const scoreCanvas=document[_0xc5f9[13]](_0xc5f9[15]);const image=document[_0xc5f9[13]](_0xc5f9[16]);const ctx=canvas[_0xc5f9[18]](_0xc5f9[17]);const nctx=nextShapeCanvas[_0xc5f9[18]](_0xc5f9[17]);const sctx=scoreCanvas[_0xc5f9[18]](_0xc5f9[17]);const squareCountX=canvas[_0xc5f9[19]]/ size;const squareCountY=canvas[_0xc5f9[20]]/ size;const shapes=[ new Tetris(0,120,[[0,1,0],[0,1,0],[1,1,0]]), new Tetris(0,96,[[0,0,0],[1,1,1],[0,1,0]]), new Tetris(0,72,[[0,1,0],[0,1,0],[0,1,1]]), new Tetris(0,48,[[0,0,0],[0,1,1],[1,1,0]]), new Tetris(0,24,[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]]), new Tetris(0,0,[[1,1],[1,1]]), new Tetris(0,48,[[0,0,0],[1,1,0],[0,1,1]])];let gameMap;let gameOver;let currentShape;let nextShape;let score;let initialTwoDArr;let whiteLineThickness=4;let gameLoop=()=>{setInterval(update,1000/ gameSpeed);setInterval(draw,1000/ framePerSecond)};let deleteCompleteRows=()=>{for(let _0x48bcx6=0;_0x48bcx6< gameMap[_0xc5f9[5]];_0x48bcx6++){let _0x48bcx2f=gameMap[_0x48bcx6];let _0x48bcx30=true;for(let _0x48bcx7=0;_0x48bcx7< _0x48bcx2f[_0xc5f9[5]];_0x48bcx7++){if(_0x48bcx2f[_0x48bcx7][_0xc5f9[1]]==  -1){_0x48bcx30= false}};if(_0x48bcx30){console[_0xc5f9[22]](_0xc5f9[21]);score+= 1000;for(let _0x48bcx31=_0x48bcx6;_0x48bcx31> 0;_0x48bcx31--){gameMap[_0x48bcx31]= gameMap[_0x48bcx31- 1]};let _0x48bcx32=[];for(let _0x48bcx7=0;_0x48bcx7< squareCountX;_0x48bcx7++){_0x48bcx32[_0xc5f9[23]]({imageX:-1,imageY:-1})};gameMap[0]= _0x48bcx32}}};let update=()=>{if(gameOver){return};if(currentShape[_0xc5f9[10]]()){currentShape[_0xc5f9[4]]+= 1}else {for(let _0x48bcx31=0;_0x48bcx31< currentShape[_0xc5f9[2]][_0xc5f9[5]];_0x48bcx31++){for(let _0x48bcx34=0;_0x48bcx34< currentShape[_0xc5f9[2]][_0xc5f9[5]];_0x48bcx34++){if(currentShape[_0xc5f9[2]][_0x48bcx31][_0x48bcx34]== 0){continue};gameMap[currentShape[_0xc5f9[6]]()[_0xc5f9[4]]+ _0x48bcx34][currentShape[_0xc5f9[6]]()[_0xc5f9[3]]+ _0x48bcx31]= {imageX:currentShape[_0xc5f9[1]],imageY:currentShape[_0xc5f9[0]]}}};deleteCompleteRows();currentShape= nextShape;nextShape= getRandomShape();if(!currentShape[_0xc5f9[10]]()){gameOver= true};score+= 100}};let drawRect=(_0x48bcx36,_0x48bcx37,_0x48bcx38,_0x48bcx39,_0x48bcx3a)=>{ctx[_0xc5f9[24]]= _0x48bcx3a;ctx[_0xc5f9[25]](_0x48bcx36,_0x48bcx37,_0x48bcx38,_0x48bcx39)};let drawBackground=()=>{drawRect(0,0,canvas[_0xc5f9[19]],canvas[_0xc5f9[20]],_0xc5f9[26]);for(let _0x48bcx6=0;_0x48bcx6< squareCountX+ 1;_0x48bcx6++){drawRect(size* _0x48bcx6- whiteLineThickness,0,whiteLineThickness,canvas[_0xc5f9[20]],_0xc5f9[27])};for(let _0x48bcx6=0;_0x48bcx6< squareCountY+ 1;_0x48bcx6++){drawRect(0,size* _0x48bcx6- whiteLineThickness,canvas[_0xc5f9[19]],whiteLineThickness,_0xc5f9[27])}};let drawCurrentTetris=()=>{for(let _0x48bcx6=0;_0x48bcx6< currentShape[_0xc5f9[2]][_0xc5f9[5]];_0x48bcx6++){for(let _0x48bcx7=0;_0x48bcx7< currentShape[_0xc5f9[2]][_0xc5f9[5]];_0x48bcx7++){if(currentShape[_0xc5f9[2]][_0x48bcx6][_0x48bcx7]== 0){continue};ctx[_0xc5f9[28]](image,currentShape[_0xc5f9[1]],currentShape[_0xc5f9[0]],imageSquareSize,imageSquareSize,Math[_0xc5f9[7]](currentShape[_0xc5f9[3]])* size+ size* _0x48bcx6,Math[_0xc5f9[7]](currentShape[_0xc5f9[4]])* size+ size* _0x48bcx7,size,size)}}};let drawSquares=()=>{for(let _0x48bcx6=0;_0x48bcx6< gameMap[_0xc5f9[5]];_0x48bcx6++){let _0x48bcx2f=gameMap[_0x48bcx6];for(let _0x48bcx7=0;_0x48bcx7< _0x48bcx2f[_0xc5f9[5]];_0x48bcx7++){if(_0x48bcx2f[_0x48bcx7][_0xc5f9[1]]==  -1){continue};ctx[_0xc5f9[28]](image,_0x48bcx2f[_0x48bcx7][_0xc5f9[1]],_0x48bcx2f[_0x48bcx7][_0xc5f9[0]],imageSquareSize,imageSquareSize,_0x48bcx7* size,_0x48bcx6* size,size,size)}}};let drawNextShape=()=>{nctx[_0xc5f9[24]]= _0xc5f9[29];nctx[_0xc5f9[25]](0,0,nextShapeCanvas[_0xc5f9[19]],nextShapeCanvas[_0xc5f9[20]]);for(let _0x48bcx6=0;_0x48bcx6< nextShape[_0xc5f9[2]][_0xc5f9[5]];_0x48bcx6++){for(let _0x48bcx7=0;_0x48bcx7< nextShape[_0xc5f9[2]][_0xc5f9[5]];_0x48bcx7++){if(nextShape[_0xc5f9[2]][_0x48bcx6][_0x48bcx7]== 0){continue};nctx[_0xc5f9[28]](image,nextShape[_0xc5f9[1]],nextShape[_0xc5f9[0]],imageSquareSize,imageSquareSize,size* _0x48bcx6,size* _0x48bcx7+ size,size,size)}}};let drawScore=()=>{sctx[_0xc5f9[30]](0,0,scoreCanvas[_0xc5f9[19]],scoreCanvas[_0xc5f9[20]]);sctx[_0xc5f9[31]]= _0xc5f9[32];sctx[_0xc5f9[24]]= _0xc5f9[33];sctx[_0xc5f9[34]](score,9,45)};let drawGameOver=()=>{ctx[_0xc5f9[24]]= _0xc5f9[27];ctx[_0xc5f9[25]](0,canvas[_0xc5f9[20]]/ 2- 80,canvas[_0xc5f9[19]],120);ctx[_0xc5f9[31]]= _0xc5f9[35];ctx[_0xc5f9[24]]= _0xc5f9[33];ctx[_0xc5f9[34]](_0xc5f9[36],25,canvas[_0xc5f9[20]]/ 2)};let draw=()=>{ctx[_0xc5f9[30]](0,0,canvas[_0xc5f9[19]],canvas[_0xc5f9[20]]);drawBackground();drawSquares();drawCurrentTetris();drawNextShape();drawScore();if(gameOver){drawGameOver()}};let getRandomShape=()=>{return Object[_0xc5f9[39]](shapes[Math[_0xc5f9[38]](Math[_0xc5f9[37]]()* shapes[_0xc5f9[5]])])};let resetVars=()=>{initialTwoDArr= [];for(let _0x48bcx6=0;_0x48bcx6< squareCountY;_0x48bcx6++){let _0x48bcx32=[];for(let _0x48bcx7=0;_0x48bcx7< squareCountX;_0x48bcx7++){_0x48bcx32[_0xc5f9[23]]({imageX:-1,imageY:-1})};initialTwoDArr[_0xc5f9[23]](_0x48bcx32)};score= 0;gameOver= false;currentShape= getRandomShape();nextShape= getRandomShape();gameMap= initialTwoDArr};window[_0xc5f9[46]](_0xc5f9[40],(_0x48bcx44)=>{if(_0x48bcx44[_0xc5f9[41]]== 37){currentShape[_0xc5f9[42]]()}else {if(_0x48bcx44[_0xc5f9[41]]== 38){currentShape[_0xc5f9[43]]()}else {if(_0x48bcx44[_0xc5f9[41]]== 39){currentShape[_0xc5f9[44]]()}else {if(_0x48bcx44[_0xc5f9[41]]== 40){currentShape[_0xc5f9[45]]()}}}}});resetVars();gameLoop()